import{b as z}from"./chunk-L4FC7CFS.js";import{b as V,c as T,d as N,e as j,f as k,g as M,k as O,l as D}from"./chunk-U7CS2GOG.js";import{Bb as F,Cb as I,Da as u,Db as P,Oa as l,Pa as a,Qa as n,Sa as g,Ta as x,Ua as f,Va as E,Wa as o,X as m,Y as p,a as h,ab as r,bb as b,cb as C,eb as w,fb as A,gb as y,pa as d,ta as v,za as S}from"./chunk-M3ESIO4O.js";function q(i,t){if(i&1&&(a(0,"div",5),r(1),n()),i&2){let e=o();d(),b(e.mensaje)}}function G(i,t){i&1&&(a(0,"div"),r(1,"Cargando especialidades..."),n())}function L(i,t){i&1&&(a(0,"div",10),r(1," No se encontraron especialidades. "),n())}function $(i,t){if(i&1){let e=f();a(0,"tr")(1,"td"),r(2),n(),a(3,"td")(4,"button",15),E("click",function(){let s=m(e).$implicit,_=o(3);return p(_.editarEspecialidad(s))}),r(5,"Editar"),n(),a(6,"button",16),E("click",function(){let s=m(e).$implicit,_=o(3);return p(_.eliminarEspecialidad(s))}),r(7,"Eliminar"),n()()()}if(i&2){let e=t.$implicit;d(2),b(e.nombre)}}function B(i,t){if(i&1&&(a(0,"div",11)(1,"table",12)(2,"thead")(3,"tr")(4,"th"),r(5,"Nombre"),n(),a(6,"th",13),r(7,"Acciones"),n()()(),a(8,"tbody"),u(9,$,8,1,"tr",14),n()()()),i&2){let e=o(2);d(9),l("ngForOf",e.especialidades)}}function R(i,t){if(i&1){let e=f();g(0),a(1,"div",6)(2,"h4"),r(3,"Lista de Especialidades"),n(),a(4,"button",7),E("click",function(){m(e);let s=o();return p(s.nuevaEspecialidad())}),r(5,"A\xF1adir Especialidad"),n()(),u(6,G,2,0,"div",4)(7,L,2,0,"div",8)(8,B,10,1,"div",9),x()}if(i&2){let e=o();d(6),l("ngIf",e.cargando),d(),l("ngIf",!e.cargando&&e.especialidades.length===0),d(),l("ngIf",!e.cargando&&e.especialidades.length>0)}}function H(i,t){i&1&&(a(0,"h4"),r(1,"A\xF1adir Especialidad"),n())}function J(i,t){i&1&&(a(0,"h4"),r(1,"Editar Especialidad"),n())}function K(i,t){if(i&1){let e=f();g(0),u(1,H,2,0,"h4",4)(2,J,2,0,"h4",4),a(3,"form",17,0),E("ngSubmit",function(){m(e);let s=o();return p(s.guardarEspecialidad())}),a(5,"div",18)(6,"label",19),r(7,"Nombre"),n(),a(8,"input",20),y("ngModelChange",function(s){m(e);let _=o();return A(_.formEspecialidad.nombre,s)||(_.formEspecialidad.nombre=s),p(s)}),n()(),a(9,"button",21),r(10),n(),a(11,"button",22),E("click",function(){m(e);let s=o();return p(s.cancelarFormulario())}),r(12,"Cancelar"),n()(),x()}if(i&2){let e=o();d(),l("ngIf",e.modo==="crear"),d(),l("ngIf",e.modo==="editar"),d(6),w("ngModel",e.formEspecialidad.nombre),d(2),C(" ",e.modo==="crear"?"Crear Especialidad":"Guardar Cambios"," ")}}var W=class i{constructor(t){this.espSvc=t}especialidades=[];cargando=!0;mensaje="";mostrandoFormulario=!1;modo="crear";formEspecialidad={id:0,nombre:""};ngOnInit(){this.cargarEspecialidades()}cargarEspecialidades(){this.cargando=!0,this.espSvc.listar().subscribe({next:t=>{this.especialidades=t,this.cargando=!1},error:t=>{console.error("Error cargando especialidades:",t),this.mensaje="Error cargando especialidades",this.cargando=!1}})}nuevaEspecialidad(){this.modo="crear",this.formEspecialidad={id:0,nombre:""},this.mostrandoFormulario=!0}editarEspecialidad(t){this.modo="editar",this.formEspecialidad=h({},t),this.mostrandoFormulario=!0}cancelarFormulario(){this.mostrandoFormulario=!1,this.formEspecialidad={id:0,nombre:""},this.modo="crear"}guardarEspecialidad(){this.modo==="crear"?this.espSvc.crearEspecialidad(this.formEspecialidad.nombre).subscribe({next:()=>{this.mensaje="Especialidad creada.",this.cancelarFormulario(),this.cargarEspecialidades()},error:t=>{console.error("Error creando especialidad:",t),this.mensaje="Error creando especialidad."}}):this.espSvc.editarEspecialidad(this.formEspecialidad.id,this.formEspecialidad.nombre).subscribe({next:()=>{this.mensaje="Especialidad actualizada.",this.cancelarFormulario(),this.cargarEspecialidades()},error:t=>{console.error("Error actualizando especialidad:",t),this.mensaje="Error actualizando especialidad."}})}eliminarEspecialidad(t){confirm(`\xBFEliminar la especialidad "${t.nombre}"?`)&&this.espSvc.eliminarEspecialidad(t.id).subscribe({next:()=>{this.mensaje="Especialidad eliminada.",this.cargarEspecialidades()},error:e=>{console.error("Error eliminando especialidad:",e),this.mensaje="Error eliminando especialidad."}})}static \u0275fac=function(e){return new(e||i)(v(z))};static \u0275cmp=S({type:i,selectors:[["app-panel-admin-especialidades"]],decls:6,vars:3,consts:[["espForm","ngForm"],[1,"container","mt-4"],[1,"text-danger","mb-4"],["class","alert alert-info",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-info"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-success",3,"click"],["class","alert alert-warning",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"alert","alert-warning"],[1,"table-responsive"],[1,"table","table-striped"],[2,"width","150px"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-primary","me-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"mt-3",3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-secondary","ms-2",3,"click"]],template:function(e,c){e&1&&(a(0,"div",1)(1,"h2",2),r(2,"Administrar Especialidades"),n(),u(3,q,2,1,"div",3)(4,R,9,3,"ng-container",4)(5,K,13,4,"ng-container",4),n()),e&2&&(d(3),l("ngIf",c.mensaje),d(),l("ngIf",!c.mostrandoFormulario),d(),l("ngIf",c.mostrandoFormulario))},dependencies:[P,F,I,D,M,V,T,N,O,k,j],encapsulation:2})};export{W as PanelAdminEspecialidades};
