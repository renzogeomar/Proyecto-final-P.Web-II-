import{I as p,K as l,Kb as s,Lb as d,Mb as o,N as i,R as a}from"./chunk-MSDOTIZ4.js";var n=class r{constructor(e){this.http=e}apiUrl="/api";login(e){return this.http.post(`${this.apiUrl}/login/`,e).pipe(l(t=>{this.guardarToken(t.access,t.refresh,e.username)}),p(()=>this.obtenerRol().pipe(l(t=>localStorage.setItem("rol",t.rol)))))}register(e){return this.http.post(`${this.apiUrl}/register/`,e,{withCredentials:!0})}guardarToken(e,t,h){localStorage.setItem("token",e),localStorage.setItem("refresh",t),localStorage.setItem("username",h)}obtenerToken(){return localStorage.getItem("token")}obtenerRefreshToken(){return localStorage.getItem("refresh")}obtenerNombreUsuario(){return localStorage.getItem("username")}obtenerRol(){let e=this.authHeaders();return this.http.get(`${this.apiUrl}/rol/`,{headers:e})}cerrarSesion(){localStorage.removeItem("token"),localStorage.removeItem("refresh"),localStorage.removeItem("username"),localStorage.removeItem("rol")}estaAutenticado(){return!!this.obtenerToken()}authHeaders(){let e=this.obtenerToken()||"";return new s({Authorization:`Bearer ${e}`})}static \u0275fac=function(t){return new(t||r)(a(o))};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};var c=class r{constructor(e,t){this.http=e;this.auth=t}baseUrl="/api";listar(){return this.http.get(`${this.baseUrl}/especialidades/`)}getEspecialidades(){return this.listar()}getMedicosPorEspecialidad(e){let t=new d().set("especialidad",e);return this.http.get(`${this.baseUrl}/medicos/`,{params:t})}authHeaders(){let e=this.auth.obtenerToken()||"";return new s({Authorization:`Bearer ${e}`})}crearEspecialidad(e){return this.http.post(`${this.baseUrl}/especialidades/crear/`,{nombre:e},{headers:this.authHeaders()})}editarEspecialidad(e,t){return this.http.put(`${this.baseUrl}/especialidades/${e}/editar/`,{nombre:t},{headers:this.authHeaders()})}eliminarEspecialidad(e){return this.http.delete(`${this.baseUrl}/especialidades/${e}/eliminar/`,{headers:this.authHeaders()})}getEspecialidadesConMedicos(){return this.http.get(`${this.baseUrl}/especialidades-con-medicos/`)}static \u0275fac=function(t){return new(t||r)(a(o),a(n))};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};export{n as a,c as b};
