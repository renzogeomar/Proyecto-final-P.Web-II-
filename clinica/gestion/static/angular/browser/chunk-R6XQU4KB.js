import{a as z}from"./chunk-CFYADBSK.js";import{b as T,c as W,d as N,e as j,f as q,g as B,k as D,l as L}from"./chunk-TKT4RXFG.js";import{Da as h,Eb as k,Fb as F,Jb as I,Oa as g,Pa as n,Qa as i,Ra as p,Sa as w,Ta as y,Ua as C,Va as u,Wa as s,X as d,Y as _,_a as A,a as v,ab as r,b as M,bb as b,cb as V,db as O,fb as f,gb as x,hb as P,pa as m,ta as E,za as S}from"./chunk-LWXCOFDW.js";function U(o,c){if(o&1&&(n(0,"div",6),r(1),i()),o&2){let e=s();m(),b(e.mensaje)}}function R(o,c){o&1&&(n(0,"div",19),p(1,"div",20),n(2,"p",21),r(3,"Cargando pacientes..."),i()())}function H(o,c){o&1&&(n(0,"div",22),p(1,"i",23),n(2,"h4"),r(3,"No se encontraron pacientes"),i(),n(4,"p"),r(5,"Prueba con otro t\xE9rmino de b\xFAsqueda o a\xF1ade un nuevo paciente."),i()())}function J(o,c){if(o&1){let e=C();n(0,"tr")(1,"td"),r(2),i(),n(3,"td"),r(4),i(),n(5,"td"),r(6),i(),n(7,"td"),r(8),i(),n(9,"td",26)(10,"button",28),u("click",function(){let t=d(e).$implicit,l=s(3);return _(l.editarPaciente(t))}),p(11,"i",29),r(12," Editar "),i(),n(13,"button",30),u("click",function(){let t=d(e).$implicit,l=s(3);return _(l.eliminarPaciente(t))}),p(14,"i",31),r(15," Eliminar "),i()()()}if(o&2){let e=c.$implicit;m(2),b(e.username),m(2),O("",e.first_name," ",e.last_name),m(2),b(e.email),m(2),b(e.telefono||"No especificado")}}function K(o,c){if(o&1&&(n(0,"div",24)(1,"table",25)(2,"thead")(3,"tr")(4,"th"),r(5,"Usuario"),i(),n(6,"th"),r(7,"Nombre Completo"),i(),n(8,"th"),r(9,"Correo"),i(),n(10,"th"),r(11,"Tel\xE9fono"),i(),n(12,"th",26),r(13,"Acciones"),i()()(),n(14,"tbody"),h(15,J,16,5,"tr",27),i()()()),o&2){let e=s(2);m(15),g("ngForOf",e.pacientes)}}function Q(o,c){if(o&1){let e=C();w(0),n(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"input",11),P("ngModelChange",function(t){d(e);let l=s();return x(l.busqueda,t)||(l.busqueda=t),_(t)}),u("keyup.enter",function(){d(e);let t=s();return _(t.buscar())}),i(),n(6,"button",12),u("click",function(){d(e);let t=s();return _(t.buscar())}),p(7,"i",13),i()(),n(8,"button",14),u("click",function(){d(e);let t=s();return _(t.nuevoPaciente())}),p(9,"i",15),r(10,"A\xF1adir Paciente "),i()(),h(11,R,4,0,"div",16)(12,H,6,0,"div",17)(13,K,16,1,"div",18),i()(),y()}if(o&2){let e=s();m(5),f("ngModel",e.busqueda),m(6),g("ngIf",e.cargando),m(),g("ngIf",!e.cargando&&e.pacientes.length===0),m(),g("ngIf",!e.cargando&&e.pacientes.length>0)}}function X(o,c){if(o&1){let e=C();n(0,"div",35)(1,"label",36),r(2,"Contrase\xF1a"),i(),n(3,"input",49),P("ngModelChange",function(t){d(e);let l=s(2);return x(l.formPaciente.password,t)||(l.formPaciente.password=t),_(t)}),i(),n(4,"small",50),r(5,"La contrase\xF1a es obligatoria al crear un nuevo paciente."),i()()}if(o&2){let e=s(2);m(3),f("ngModel",e.formPaciente.password)}}function Y(o,c){if(o&1){let e=C();w(0),n(1,"div",7)(2,"div",32)(3,"h4",33),r(4),i()(),n(5,"div",8)(6,"form",34,0),u("ngSubmit",function(){d(e);let t=s();return _(t.guardarPaciente())}),n(8,"div",35)(9,"label",36),r(10,"Usuario"),i(),n(11,"input",37),P("ngModelChange",function(t){d(e);let l=s();return x(l.formPaciente.username,t)||(l.formPaciente.username=t),_(t)}),i()(),n(12,"div",35)(13,"label",36),r(14,"Correo"),i(),n(15,"input",38),P("ngModelChange",function(t){d(e);let l=s();return x(l.formPaciente.email,t)||(l.formPaciente.email=t),_(t)}),i()(),n(16,"div",39)(17,"div",40)(18,"label",36),r(19,"Nombres"),i(),n(20,"input",41),P("ngModelChange",function(t){d(e);let l=s();return x(l.formPaciente.first_name,t)||(l.formPaciente.first_name=t),_(t)}),i()(),n(21,"div",40)(22,"label",36),r(23,"Apellidos"),i(),n(24,"input",42),P("ngModelChange",function(t){d(e);let l=s();return x(l.formPaciente.last_name,t)||(l.formPaciente.last_name=t),_(t)}),i()()(),n(25,"div",35)(26,"label",36),r(27,"Tel\xE9fono"),i(),n(28,"input",43),P("ngModelChange",function(t){d(e);let l=s();return x(l.formPaciente.telefono,t)||(l.formPaciente.telefono=t),_(t)}),i()(),h(29,X,6,1,"div",44),i()(),n(30,"div",45)(31,"button",46),u("click",function(){d(e);let t=s();return _(t.cancelarFormulario())}),r(32,"Cancelar"),i(),n(33,"button",47),u("click",function(){d(e);let t=s();return _(t.guardarPaciente())}),p(34,"i",48),r(35),i()()(),y()}if(o&2){let e=A(7),a=s();m(4),b(a.modo==="crear"?"A\xF1adir Nuevo Paciente":"Editar Paciente"),m(7),f("ngModel",a.formPaciente.username),m(4),f("ngModel",a.formPaciente.email),m(5),f("ngModel",a.formPaciente.first_name),m(4),f("ngModel",a.formPaciente.last_name),m(4),f("ngModel",a.formPaciente.telefono),m(),g("ngIf",a.modo==="crear"),m(4),g("disabled",e.invalid),m(2),V(" ",a.modo==="crear"?"Crear Paciente":"Guardar Cambios"," ")}}var G=class o{constructor(c){this.svc=c}pacientes=[];cargando=!0;mensaje="";busqueda="";mostrandoFormulario=!1;modo="crear";formPaciente=this.formPorDefecto();ngOnInit(){this.cargarPacientes()}formPorDefecto(){return{id:null,username:"",email:"",first_name:"",last_name:"",telefono:"",password:""}}cargarPacientes(){this.cargando=!0,this.svc.listar(this.busqueda).subscribe({next:c=>{this.pacientes=c,this.cargando=!1},error:c=>{console.error("Error cargando pacientes:",c),this.mensaje="Error cargando pacientes",this.cargando=!1}})}buscar(){this.cargarPacientes()}nuevoPaciente(){this.modo="crear",this.formPaciente=this.formPorDefecto(),this.mostrandoFormulario=!0}editarPaciente(c){this.modo="editar",this.formPaciente=M(v({},c),{password:""}),this.mostrandoFormulario=!0}cancelarFormulario(){this.mostrandoFormulario=!1,this.formPaciente=this.formPorDefecto(),this.modo="crear"}guardarPaciente(){this.modo==="crear"?this.svc.crear(this.formPaciente).subscribe({next:()=>{this.mensaje="Paciente creado.",this.cancelarFormulario(),this.cargarPacientes()},error:c=>{console.error("Error creando paciente:",c),this.mensaje="Error creando paciente."}}):this.svc.actualizar(this.formPaciente.id,this.formPaciente).subscribe({next:()=>{this.mensaje="Paciente actualizado.",this.cancelarFormulario(),this.cargarPacientes()},error:c=>{console.error("Error actualizando paciente:",c),this.mensaje="Error actualizando paciente."}})}eliminarPaciente(c){confirm(`\xBFEliminar al paciente "${c.username}"?`)&&this.svc.eliminar(c.id).subscribe({next:()=>{this.mensaje="Paciente eliminado.",this.cargarPacientes()},error:e=>{console.error("Error eliminando paciente:",e),this.mensaje="Error eliminando paciente."}})}static \u0275fac=function(e){return new(e||o)(E(z))};static \u0275cmp=S({type:o,selectors:[["app-panel-admin"]],decls:8,vars:3,consts:[["pacForm","ngForm"],[1,"container","mt-4","admin-pacientes-page"],[1,"page-header"],[1,"bi","bi-people-fill","page-icon"],["class","alert alert-info",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-info"],[1,"card","shadow-sm"],[1,"card-body"],[1,"toolbar"],[1,"input-group","search-bar"],["type","text","placeholder","Buscar por usuario, nombre, correo...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-search"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-lg","me-2"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"loading-state"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2"],[1,"empty-state"],[1,"bi","bi-emoji-frown","empty-icon"],[1,"table-responsive"],[1,"table","custom-table","align-middle"],[1,"text-end"],[4,"ngFor","ngForOf"],["title","Editar Paciente",1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"bi","bi-pencil-fill","me-1"],["title","Eliminar Paciente",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash-fill","me-1"],[1,"card-header"],[1,"mb-0"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","email","type","email",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col-md-6","mb-3"],["name","first_name",1,"form-control",3,"ngModelChange","ngModel"],["name","last_name",1,"form-control",3,"ngModelChange","ngModel"],["name","telefono",1,"form-control",3,"ngModelChange","ngModel"],["class","mb-3",4,"ngIf"],[1,"card-footer","form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success",3,"click","disabled"],[1,"bi","bi-check-lg","me-2"],["name","password","type","password",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-text","text-muted"]],template:function(e,a){e&1&&(n(0,"div",1)(1,"header",2),p(2,"i",3),n(3,"h2"),r(4,"Administrar Pacientes"),i()(),h(5,U,2,1,"div",4)(6,Q,14,4,"ng-container",5)(7,Y,36,9,"ng-container",5),i()),e&2&&(m(5),g("ngIf",a.mensaje),m(),g("ngIf",!a.mostrandoFormulario),m(),g("ngIf",a.mostrandoFormulario))},dependencies:[I,k,F,L,B,T,W,N,D,q,j],styles:[".page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.page-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#0d6efd}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:700;color:#2c3e50}.card[_ngcontent-%COMP%]{border:none;border-radius:12px}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e9ecef;font-weight:600}.card-footer[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #e9ecef}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.search-bar[_ngcontent-%COMP%]{max-width:350px}.custom-table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0}.custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#5a6a7a;border-bottom-width:2px}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease-in-out}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1rem 1.25rem}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#6c757d}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;color:#ced4da}"]})};export{G as PanelAdmin};
